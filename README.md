# Эмиттер логов криптобиржи для Loki

Небольшой CLI-скрипт `crypto_backend.py` генерирует псевдо-логи криптобиржи и отправляет их в Loki. Подходит для тестирования пайплайнов логирования.

## Требования
- Python 3.11+ (проверено на Windows 10)
- Доступ к Loki endpoint (HTTP)

## Быстрый старт
1) Клонируйте или скачайте проект в удобную папку.  
2) (Рекомендуется) создайте и активируйте виртуальное окружение:
   - PowerShell:
     ```powershell
     python -m venv venv
     .\venv\Scripts\Activate.ps1
     ```
   - CMD:
     ```cmd
     python -m venv venv
     venv\Scripts\activate.bat
     ```
3) Установите зависимости:
   ```powershell
   pip install -r requirements.txt
   ```
4) Запустите эмиттер:
   ```powershell
   python crypto_backend.py
   ```

## Параметры запуска
- `--loki-url` — URL push-эндпоинта Loki. По умолчанию: `http://89.111.153.43:3100/loki/api/v1/push`
- `--interval` — интервал между логами в секундах (float). По умолчанию `3.0`
- `--max-logs` — ограничение на количество логов. `0` = бесконечно (по умолчанию)

## Примеры
- Отправка логов на свой Loki каждые 1.5 секунды:
  ```powershell
  python crypto_backend.py --loki-url http://<host>:3100/loki/api/v1/push --interval 1.5
  ```
- Отправить 20 логов и завершить:
  ```powershell
  python crypto_backend.py --max-logs 20
  ```

## Остановка
Нажмите `Ctrl+C` в консоли — скрипт корректно завершит работу и покажет, сколько логов было отправлено.

## Полезно знать
- По умолчанию логи имеют случайные значения валют, действий и сервисов, а уровни распределены с перекосом в сторону `info`.
- Для стабильной работы нужен доступ к сети до Loki; при ошибках выводятся сообщения с кодом ответа/исключением.

